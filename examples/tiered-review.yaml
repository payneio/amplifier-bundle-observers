# Tiered Review Configuration
#
# Two-tier review: multiple fast Haiku observers + deep Sonnet analysis.
# Cost-effective approach that catches issues quickly while providing thorough analysis.

hooks:
  - module: hooks-observations
    source: git+https://github.com/payneio/amplifier-bundle-observers@main#subdirectory=modules/hooks-observations
    config:
      hooks:
        - trigger: "orchestrator:complete"
          priority: 5

      execution:
        mode: parallel_sync
        max_concurrent: 5
        timeout_per_observer: 60
        on_timeout: skip

      observers:
        # Tier 1: Fast scans with Haiku (uses model from observer file)
        - observer: observers/python-best-practices
          watch:
            - type: files
              paths:
                - "**/*.py"

        - observer: observers/error-handling
          watch:
            - type: files
              paths:
                - "**/*.py"

        - observer: observers/secrets-scanner
          watch:
            - type: files
              paths:
                - "**/*"

        # Tier 2: Deep analysis with Sonnet (override model for thorough review)
        - observer: observers/security-auditor
          model: claude-sonnet-4-20250514  # Override to more capable model
          watch:
            - type: files
              paths:
                - "src/**/*.py"
            - type: conversation
              include_tool_calls: true

        - observer: observers/architecture-reviewer
          model: claude-sonnet-4-20250514
          watch:
            - type: conversation
              include_tool_calls: true
              include_reasoning: true
